var app=function(t){"use strict";function n(){}function e(t){return t()}function o(){return Object.create(null)}function r(t){t.forEach(e)}function c(t){return"function"==typeof t}function s(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function a(t,n){t.appendChild(n)}function l(t,n,e){t.insertBefore(n,e||null)}function u(t){t.parentNode.removeChild(t)}function i(t){return document.createElement(t)}function f(t){return document.createTextNode(t)}function d(){return f(" ")}function p(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function h(t,n){n=""+n,t.data!==n&&(t.data=n)}let g;function m(t){g=t}function $(){if(!g)throw new Error("Function called outside component initialization");return g}t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;const b=[],y=[],v=[],x=[],_=Promise.resolve();let w=!1;function k(t){v.push(t)}let E=!1;const C=new Set;function j(){if(!E){E=!0;do{for(let t=0;t<b.length;t+=1){const n=b[t];m(n),A(n.$$)}for(b.length=0;y.length;)y.pop()();for(let t=0;t<v.length;t+=1){const n=v[t];C.has(n)||(C.add(n),n())}v.length=0}while(b.length);for(;x.length;)x.pop()();w=!1,E=!1,C.clear()}}function A(t){if(null!==t.fragment){t.update(),r(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(k)}}const N=new Set;function O(t,n){-1===t.$$.dirty[0]&&(b.push(t),w||(w=!0,_.then(j)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function B(t,s,a,l,i,f,d=[-1]){const p=g;m(t);const h=s.props||{},$=t.$$={fragment:null,ctx:null,props:f,update:n,not_equal:i,bound:o(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(p?p.$$.context:[]),callbacks:o(),dirty:d};let b=!1;if($.ctx=a?a(t,h,(n,e,...o)=>{const r=o.length?o[0]:e;return $.ctx&&i($.ctx[n],$.ctx[n]=r)&&($.bound[n]&&$.bound[n](r),b&&O(t,n)),e}):[],$.update(),b=!0,r($.before_update),$.fragment=!!l&&l($.ctx),s.target){if(s.hydrate){const t=function(t){return Array.from(t.childNodes)}(s.target);$.fragment&&$.fragment.l(t),t.forEach(u)}else $.fragment&&$.fragment.c();s.intro&&((y=t.$$.fragment)&&y.i&&(N.delete(y),y.i(v))),function(t,n,o){const{fragment:s,on_mount:a,on_destroy:l,after_update:u}=t.$$;s&&s.m(n,o),k(()=>{const n=a.map(e).filter(c);l?l.push(...n):r(n),t.$$.on_mount=[]}),u.forEach(k)}(t,s.target,s.anchor),j()}var y,v;m(p)}function I(t,n,e){const o=t.slice();return o[5]=n[e],o}function M(t){let n,e,o,r,c,s,g,m,$,b,y,v,x,_,w,k,E,C,j=t[5].author+"",A=t[5].name+"",N=t[5].discount+"";return{c(){n=i("div"),e=i("div"),o=i("a"),r=i("img"),s=d(),g=i("h6"),m=f(j),$=d(),b=i("h6"),y=f(A),v=d(),x=i("h6"),_=i("span"),w=f(N),k=f(" / "),E=i("a"),E.textContent="Buy Now",C=d(),r.src!==(c="../static/"+t[5].image)&&p(r,"src",c),p(r,"alt","img"),p(o,"href","."),p(_,"class","price"),p(E,"href","."),p(e,"class","item"),p(n,"class","col-md-3")},m(t,c){l(t,n,c),a(n,e),a(e,o),a(o,r),a(o,s),a(o,g),a(g,m),a(o,$),a(o,b),a(b,y),a(e,v),a(e,x),a(x,_),a(_,w),a(x,k),a(x,E),a(n,C)},p(t,n){1&n&&r.src!==(c="../static/"+t[5].image)&&p(r,"src",c),1&n&&j!==(j=t[5].author+"")&&h(m,j),1&n&&A!==(A=t[5].name+"")&&h(y,A),1&n&&N!==(N=t[5].discount+"")&&h(w,N)},d(t){t&&u(n)}}}function S(t){let e,o,r,c,s,f,h,g,m,$=t[0],b=[];for(let n=0;n<$.length;n+=1)b[n]=M(I(t,$,n));return{c(){e=i("main"),o=i("section"),r=i("div"),c=i("h2"),c.textContent="recently added books to our store",s=d(),f=i("div"),h=i("div");for(let t=0;t<b.length;t+=1)b[t].c();g=d(),m=i("div"),m.innerHTML='<button class="btn gray-btn">load More books</button>',p(h,"class","row"),p(m,"class","btn-sec"),p(f,"class","recent-book-sec"),p(r,"class","container"),p(o,"class","static about-sec"),p(e,"class","svelte-og6v3r")},m(t,n){l(t,e,n),a(e,o),a(o,r),a(r,c),a(r,s),a(r,f),a(f,h);for(let t=0;t<b.length;t+=1)b[t].m(h,null);a(f,g),a(f,m)},p(t,[n]){if(1&n){let e;for($=t[0],e=0;e<$.length;e+=1){const o=I(t,$,e);b[e]?b[e].p(o,n):(b[e]=M(o),b[e].c(),b[e].m(h,null))}for(;e<b.length;e+=1)b[e].d(1);b.length=$.length}},i:n,o:n,d(t){t&&u(e),function(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}(b,t)}}}function q(n,e,o){let r=[];t.get("csrftoken");const c=(s="shop-ref",document.getElementById(s).href);var s,a;function l(t,n){const e=setInterval(t,n);!function(t){$().$$.on_destroy.push(t)}(()=>{clearInterval(e)})}a=async()=>{const t=await fetch(c,{headers:{Accept:"application/json, text-plain, */*","X-Requested-With":"XMLHttpRequest"}});let n=await t.json();o(0,r=n.books),o(0,r),console.log(r)},$().$$.on_mount.push(a);let u=new WebSocket("ws://localhost:8000");return u.onopen=function(t){console.log("[open] Соединение установлено"),console.log("C"),u.send("books?"),l(async()=>{u.send("books?")},1e3)},u.onmessage=function(t){console.log("[message] Данные получены с сервера: "+t.data);let n=JSON.parse(t.data).value;document.getElementById("book-count").innerText=n},[r]}return new class extends class{$destroy(){!function(t,n){const e=t.$$;null!==e.fragment&&(r(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}(this,1),this.$destroy=n}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(){}}{constructor(t){super(),B(this,t,q,S,s,{})}}({target:document.body,props:{name:"world"}})}(Cookies);
//# sourceMappingURL=bundle.js.map
